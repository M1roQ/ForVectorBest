# src/

В папке `src` содержатся основные модули и компоненты проекта, реализующие архитектуру и логику обработки данных: от конфигурации и базовых интерфейсов до детекции, предобработки изображений и организации пайплайна.

---

## Содержание

- [base_worker.py](#base_worker)
- [conf.py](#conf)
- [main.py](#main)
- [detector/](#detector)
- [image_processor/](#image_processor)
- [pipeline/](#pipeline)
- [Взаимодействие компонентов](#component-interaction)
- [Рекомендации по расширению](#recommendations)

---

### base_worker.py
Базовый класс для всех рабочих компонентов (workers) проекта.  
Определяет единый интерфейс, который должны реализовать все наследники:
- `__call__`: основной метод обработки (например, инференс, преобразование и т.д.)
- `visualize`: метод для визуализации или сохранения результатов работы компонента.

Используется для стандартизации взаимодействия между различными рабочими модулями (детектор, препроцессор, сегментатор и др.).

---

### conf.py
Конфигурационный файл проекта.

Содержит:
- Пути к данным, весам моделей, директориям для сохранения результатов.
- Параметры обучения и инференса (например, словарь с параметрами для YOLO).
- Список классов объектов для детекции.
- Глобальные настройки: режим отладки, параметры логирования и др.

Позволяет централизованно управлять настройками проекта и легко изменять параметры без правки кода.

---

### main.py
Главная точка входа в проект.

- Запускает основной pipeline обработки данных.
- Связывает все ключевые компоненты: детектор, препроцессор и др.
- Управляет последовательностью шагов обработки, обработкой входных данных и сохранением результатов.


---

### detector/
Модуль для работы с детектором объектов.

- **__init__.py** — делает папку модулем Python.
- **detector.py** — реализует класс `Detector`, отвечающий за:
  - Загрузку модели YOLO.
  - Инференс по отдельному изображению (`__call__`).
  - Визуализацию результатов (`visualize`).
  - Обучение модели (`train`).
  - Пакетный инференс и сохранение результатов (`predict`).

Используется для автоматического поиска объектов на изображениях и генерации аннотаций.

---

### image_processor/
Модуль для предобработки изображений.

- **__init__.py** — делает папку модулем Python.
- **image_processor.py** — реализует класс `Preprocessor`, отвечающий за:
  - Преобразование изображений (перевод в псевдосерый формат) через метод `__call__`.
  - Визуализацию или сохранение обработанных изображений (`visualize`).

Позволяет стандартизировать и ускорить подготовку данных для последующей обработки.

---

### pipeline/
Модуль, реализующий основной pipeline обработки данных.

- **__init__.py** — делает папку модулем Python.
- **pipeline.py** — определяет последовательность шагов обработки:
  - Связывает детектор, препроцессор и другие компоненты.
  - Управляет передачей данных между модулями.
  - Позволяет легко модифицировать или расширять pipeline под новые задачи.

---
<a name="component-interaction"></a>
## Взаимодействие компонентов

- **main.py** — точка входа, связывает все компоненты.
- **base_worker.py** — определяет общий интерфейс для рабочих модулей.
- **conf.py** — хранит все параметры и пути, используемые остальными модулями.
- **detector/**, **image_processor/** — реализуют ключевые этапы обработки данных.
- **pipeline/** — организует последовательность шагов и передачу данных между модулями.

---
<a name="recommendations"></a>
## Рекомендации по расширению

- Для добавления новых рабочих компонентов наследуйте их от `base_worker.py`.
- Все параметры и пути выносите в `conf.py` для удобства конфигурирования.
- Для новых этапов обработки добавляйте соответствующие классы и интегрируйте их в pipeline.
- Соблюдайте единый стиль интерфейсов (`__call__`, `visualize`) для совместимости модулей.
